---
layout: post
status: publish
published: true
title: Chrome Extension for Viewing Static Data in NextJS
author:
  display_name: Peter Kellner
  login: admin
  email: peter@peterkellner.net
  url: ''
author_login: admin
author_email: peter@peterkellner.net
excerpt: Chrome Extension to view that static data associated with a NextJS Server-side
  React app to help make smaller and increase web performance.
wordpress_id: 4782
wordpress_url: https://peterkellner.net/?p=4782
date: '2019-06-16 16:12:07 -0700'
date_gmt: '2019-06-16 23:12:07 -0700'
categories:
- JavaScript
tags:
- NextJS
- JavaScript
- SPA
---
<p><!-- wp:paragraph --></p>
<p><strong>TLDR;</strong> Install the Google Chrome extension Utilities Extension" and quickly see both the size and data associated with your <a href="https://nextjs.org/">Next.js</a> server side rendered <a href="https://reactjs.org/">React </a>app.  That is, the static data included in your first page download. Using this information, you can reduce the size of that static data downloaded and make your web pages load faster for your users.</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:gallery {"ids":[4789,4797]} --></p>
<ul class="wp-block-gallery columns-2 is-cropped">
<li class="blocks-gallery-item">
<figure><img src="/wp/wp/wp-content/uploads/2019/06/BlogPost2.png" alt="" data-id="4789" data-link="https://peterkellner.net/2019/06/16/a-chrome-extension-for-viewing-serialized-data-in-nextjs/blogpost2/" class="wp-image-4789"/><br />
<figcaption>Showing Size of __NEXT_DATA__ as 304K</figcaption>
</figure>
</li>
<li class="blocks-gallery-item">
<figure><img src="/wp/wp/wp-content/uploads/2019/06/BlogPost5-1.png" alt="" data-id="4797" data-link="https://peterkellner.net/2019/06/16/a-chrome-extension-for-viewing-serialized-data-in-nextjs/blogpost5-2/" class="wp-image-4797"/><br />
<figcaption>Right-mouse Button, View __NEXT_DATA_JS Results</figcaption>
</figure>
</li>
</ul>
<p><!-- /wp:gallery --></p>
<p><!-- wp:heading --></p>
<h2>Installing and Using This Chome Extension</h2>
<p><!-- /wp:heading --></p>
<p><!-- wp:gallery {"ids":[4812]} --></p>
<ul class="wp-block-gallery columns-1 is-cropped">
<li class="blocks-gallery-item">
<figure><img src="/wp/wp/wp-content/uploads/2019/06/chrome-web-store.png" alt="" data-id="4812" data-link="https://peterkellner.net/2019/06/16/a-chrome-extension-for-viewing-serialized-data-in-nextjs/chrome-web-store/" class="wp-image-4812"/><br />
<figcaption>Install<a href="https://chrome.google.com/webstore/detail/nextjs-utilities-extensio/ffcogmoganomoabikgmcmckdgojnpldo">https://chrome.google.com/webstore/detail/nextjs-utilities-extensio/ffcogmoganomoabikgmcmckdgojnpldo</a> From Chrome Extensions Store<br></figcaption>
</figure>
</li>
</ul>
<p><!-- /wp:gallery --></p>
<p><!-- wp:paragraph --></p>
<p>All you need to do to use this extension is go to the Chrome Extension Store and search for "NextJS" or click on this <a href="https://chrome.google.com/webstore/detail/nextjs-utilities-extensio/ffcogmoganomoabikgmcmckdgojnpldo">URL</a>.</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --></p>
<p>You'll now have a purple icon on your toolbar as shown above with the letter "N" in it.  If you are on a page that is generated with Next.js (like my example page https://svcc.mobi, the next thing is to click on the "N" toolbar icon.  Immediately, the size of the Next.js static <strong>window.__NEXT_DATA__</strong> will be down (that's the 384K shown in the above image). Just FYI, K means kilobytes, M means megabytes and b means bytes.  If your page was not generated by a Next.js app, "n/a" will be shown for not applicable.</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --></p>
<p>If you want to see the actual data, right mouse button on the toolbar icon and click the context menu choice "View NextJS Data". That way, if your __NEXT_DATA__ is large, you can visually see where the problem is.  Notice in my example, it's 384K.  That's huge!  What I need to do is go back to my application and reduce the size by downloading only the session data I need to display and not a lot of other data I don't use.</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:heading --></p>
<h2>First Page Download Problem With SPA's</h2>
<p><!-- /wp:heading --></p>
<p><!-- wp:paragraph --></p>
<p>The Achilles heel of Single Page Apps (SPA's) is that the first time a web page that is viewed, there is a long delay between when a the user lands on the page and the browser user sees any data. This problem is known as "the first page download problem".  You can read an authoritative post on this topic by Guillermo Raunch titled "<a href="https://rauchg.com/2014/7-principles-of-rich-web-applications/#server-rendered-pages-are-not-optional">7 Principles of Rich Web Applications - Server Rendered Pages Are  Not Optional</a>".</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --></p>
<p>To mitigate this problem in <a href="https://reactjs.org/">React</a>, the most popular single page app (SPA) framework out there, written and used by <a href="https://www.facebook.com/">Facebook</a>, is to first run the app inside of the server before the response from the first request is made, and then download all that HTML on the first request.  Since the JavaScript can all be run inside the server with <a href="https://nodejs.org/en/">Node.JS</a>, and, React has built in support for doing that through a method named <a href="https://reactjs.org/docs/react-dom-server.html#rendertostring">renderToString</a>, this is easy, but with one caveat.  </p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --></p>
<p>What happens if the web page you are rendering includes data that is asynchronously loaded on it such as data that is retrieved from an external service (like a REST service for example).  Now, when the Node server figures out all your HTML to download, it must also complete those REST service calls synchronously before responding with the full HTML. Not only that, That REST data now represents the "State" of the SPA, and so that REST data must also be downloaded along with the the HTML so that after the page downloads, it can be "re-hydrated" with that State data to continue working like a normal web page.</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:heading --></p>
<h2>How The Chrome Extension Works</h2>
<p><!-- /wp:heading --></p>
<p><!-- wp:paragraph --></p>
<p>Chrome extensions that do this kind of thing can be tricky to write because they don't easily interact with the JavaScript execution context running on any give web page.  They are good at reading the static HTML and running JavaScript in their own isolated execution context, but getting to the actual execution context of the page is tricky. Luckily (and hopefully), for you it will just work.</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --></p>
<p>You can think of what this extension does is no more complex than opening up chrome debug tools and going to the console window on a page generated by an app written in Next.js.  Then, typing at the command prompt:  <strong>JSON.stringify(window.__NEXT_DATA__)</strong>.  This chrome extension just gives you a short cut to this as well as a nice way to see the actual data formatted in JSON.</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:gallery {"ids":[4802]} --></p>
<ul class="wp-block-gallery columns-1 is-cropped">
<li class="blocks-gallery-item">
<figure><img src="/wp/wp/wp-content/uploads/2019/06/BlogPost6.png" alt="" data-id="4802" data-link="https://peterkellner.net/2019/06/16/a-chrome-extension-for-viewing-serialized-data-in-nextjs/blogpost6/" class="wp-image-4802"/><br />
<figcaption>Viewing __NEXT_DATA__ in the Chrome Dev Tools console<br></figcaption>
</figure>
</li>
</ul>
<p><!-- /wp:gallery --></p>
<p><!-- wp:heading --></p>
<h2>What Could Go Wrong?</h2>
<p><!-- /wp:heading --></p>
<p><!-- wp:paragraph --></p>
<p>I'm writing this because even though I wrote this extension and use it heavily to keep my first page download size down to a reasonable size, over and over again, I make the same mistake.</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --></p>
<p>I first browse to a page like https://svcc.mobi and then click on the "sessions" menu choice.  Following that, I click on the Chrome Extension toolbar icon.  I see 2K when I think I should be seeing a much large number (like 304K).  The reason is I did a "client side" link to my sessions page and the original page downloaded was from the home page which indeed, only had a 2K __NEXT_DATA__ object. </p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --></p>
<p>What I need to do is reload that page I'm on by positioning my cursor to the URL bar, selecting the current URL (https://svcc.mobi/sessions), and then pressing enter to get a new request sent to the server.  Now, pressing the Chrome extension icon will show the correct size of 304K that I expected.</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:heading --></p>
<h2>Looking for Feedback</h2>
<p><!-- /wp:heading --></p>
<p><!-- wp:paragraph --></p>
<p>I'd love feedback on this extension as well as suggestions for how to enhance.  Please post issues to the GitHub repo where this extension lives with that.  </p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --></p>
<p><a href="https://github.com/pkellner/nextjs-utils-chromium-extension">https://github.com/pkellner/nextjs-utils-chromium-extension</a></p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --></p>
<p>Want To Know More About Developing Apps with Next.js?</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --></p>
<p>You can head over to the awesome <a href="https://nextjs.org/learn/basics/getting-started">getting started docs</a> on the Next.js site or even better, you can watch my two hour course on <a href="https://pluralsight.pxf.io/4xezM">Pluralsight</a> titled <a href="http://pluralsight.pxf.io/6Qb0V">"Building Server-side Rendered React Apps"</a>. If you don't have a Pluralsight account, you can click on <a href="//pluralsight.pxf.io/c/1196644/503634/7490">this link</a> and get a free trial and watch my full course before committing any money. You could also watch <a href="https://app.pluralsight.com/profile/author/peter-kellner">my other 8 courses</a> and I would not complain about that  :)</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --></p>
<p>Thanks for reading.</p>
<p><!-- /wp:paragraph --></p>
